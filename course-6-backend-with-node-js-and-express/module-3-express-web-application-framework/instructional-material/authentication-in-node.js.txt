Welcome to Authentication in Node.js. After watching this video, you will be able to Discuss advantages of token-based authentication in Node.js And implement token-based authentication and authorization in Node.js So, authentication is the process of confirming a user's identity by obtaining credentials And using those credentials to validate their identity. Authentication is meant to identify users and provide access rights and contents depending on their ID. As discussed in another video, authentication can be achieved using the following approaches Session-based authentication, token-based authentication, and password-less authentication. Token-based authentication is the most popular approach to implementing authentication in Node.js And the following are some of the advantages of using token-based authentication. Token-based authentication is more scalable as the token only needs to be stored on the client side. Also, since the server only needs to verify the token along with the user information, it is easier to handle multiple users. Token-based authentication offers flexibility as they can be used across multiple servers And they can offer authentication for diverse websites and applications at once. And JWT used in token-based authentication can be signed and encrypted Which means they cannot be tampered with and also cannot be read without the private encryption key. Now let's set up an ExpressJS API server that provides access to employee information based on their usage rights. The application will have two APIs, each with its own endpoints. We will first use a POST API for logging in that returns a web token to sign in by sending the username and password in the request body. The call to this API endpoint should be made from the web server that hosts the application's front end. And a second GET API will be the resource endpoint to get employee information that only authenticated users can access. Let's consider what this code might look like. This code creates a web server module by calling the express function and assigning it to the constant myApp. The myapp.get function creates a GET API endpoint for the employee's API And any call to this endpoint currently returns an HTTP status code of 401. And 401 means not authorized. With the message, please log in to access this resource. The server also listens on port 5000 for any HTTP calls to the server and logs the message API server is localhost colon 5000 to the console. To execute the API first, save the file and name it apiServer.js. Now run the command node apiServer.js. To verify that the secure endpoint cannot be accessed unless the user is authorized, run this curl command on the screen. In the output, you should see the message, please log in to access this resource per your code. In the next part of the code, we allow users to sign in and send back a verified generated token as long as the username and password are correct. Generally, usernames and passwords are stored in the database. However, since setting up a database connection is out of the scope of this code demo, we will hard code user and password as the username and password in this code example. Now, to generate the verified JWT, use the jsonwebtoken npm package. Install it using the command npm install option save jsonwebtoken. At the start, you will need to require the module jsonwebtoken from the jsonwebtoken package. This module is used to generate the JWT using the JWT secret. A constant is then declared to store the JWT secret. The myapp.use method enables returning a JSON response by the API methods. To display the code in this video, we are hard coding the username and password. Please note, however, that the JWT secret should always be generated using a password generator and stored in the config file as an environment variable and not hard coded in the API as shown here. The username and password from the request body is then compared with the values fetched from the database. And once the username and password match, the JWT is generated using the jsonwebtoken.sign function by including the username and the JWT secret as parameters and is returned as a JSON response from the sign-in API. Now, if the username and password match fails, then an HTTP status code of 401 is returned with the message, invalid username and or password. Next, we define the getAPI method with the employees endpoint. The token fetched from the call to the sign-in API is passed in the authorization header. The getAPI employees is updated to read the authorization header from the incoming API request using the request.header function. And if no header is found within the request, then a status code of 401 is sent back by the getAPI with the message, no token. The authorization header always starts with the string, bearer, at the start of the header, and therefore, this token is also known as bearer token. The fetched JWT is verified using the function jsonwebtoken.verify by passing the fetched token and the JWT secret. And the value returned by this function is then used to verify if the user property matches with the username fetched from the database. And if that match happens, then the user is authenticated and is provided access to the employees API. The API then returns the 200 success status code with the message, access successful to employee endpoint. Now, if the verification fails, then the 401 unauthorized status code is sent back to the client with the message, please log in to access this resource. Lastly, write a listener function that listens for the response on port 5000, then log the phrase, API server is localhost 5000 to the console log. Recall that the code you just wrote has a sign-in API endpoint that reads the username and password from the request body and then validates it against the username and password stored in the database. If there is a match, it then uses the jsonwebtoken.sign method to generate the token and send it back in the response. In this video, you learned that The advantages of token-based authentication include scalability, flexibility, and security. The POST API is used during authentication to log a user into an application. The GET API is used in authorization to determine which resources a user can access. And a JSON web token is used to authenticate a user and authorize which resources they have access to use.